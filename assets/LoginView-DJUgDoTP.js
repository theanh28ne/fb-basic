import{d as b,u as V,a as k,r as h,b as x,c as C,e as p,o as m,w as N,f as r,g as B,h as l,t as S,i as u,j as n}from"./index-B7h1RgFv.js";import{I as w}from"./Input-DbqAuQ8p.js";import{B as M,_ as q}from"./Button-M4aO0RFN.js";const I={key:0,class:"px-4 py-3.5 rounded-lg text-sm bg-red-50 text-red-600 border border-red-200"},L={class:"text-center pt-4 border-t border-gray-200"},U={class:"text-gray-600"},$={class:"text-gray-600"},j=b({__name:"LoginForm",setup(v){const g=V(),f=k(),o=h({login:"",password:""}),s=h({login:"",password:""}),i=x(!1),a=x(""),_=()=>{let t=!0;return s.login="",s.password="",o.login.trim()||(s.login="Vui lòng nhập email hoặc username",t=!1),o.password?o.password.length<6&&(s.password="Mật khẩu phải có ít nhất 6 ký tự",t=!1):(s.password="Vui lòng nhập mật khẩu",t=!1),t},y=async()=>{if(a.value="",!!_()){i.value=!0;try{const t=await f.login({login:o.login,password:o.password});t?.success?g.push("/feed"):a.value=t?.error||"Đăng nhập thất bại"}catch(t){a.value=t.message||"Có lỗi xảy ra, vui lòng thử lại"}finally{i.value=!1}}};return(t,e)=>{const c=C("router-link");return m(),p("form",{onSubmit:N(y,["prevent"]),class:"w-full max-w-md flex flex-col gap-6 p-8"},[e[7]||(e[7]=r("h2",{class:"text-3xl font-bold text-gray-900 text-center"},"Đăng nhập",-1)),e[8]||(e[8]=r("p",{class:"text-gray-600 text-center -mt-2"},"Chào mừng bạn quay trở lại!",-1)),a.value?(m(),p("div",I,S(a.value),1)):B("",!0),l(w,{id:"login",modelValue:o.login,"onUpdate:modelValue":e[0]||(e[0]=d=>o.login=d),label:"Email hoặc Username",type:"text",placeholder:"Nhập email hoặc username",required:"",error:s.login},null,8,["modelValue","error"]),l(w,{id:"password",modelValue:o.password,"onUpdate:modelValue":e[1]||(e[1]=d=>o.password=d),label:"Mật khẩu",type:"password",placeholder:"Nhập mật khẩu",required:"",error:s.password},null,8,["modelValue","error"]),l(M,{type:"submit",variant:"primary",loading:i.value,"custom-class":"w-full mt-2"},{default:u(()=>[...e[2]||(e[2]=[n(" Đăng nhập ",-1)])]),_:1},8,["loading"]),r("div",L,[r("p",U,[e[4]||(e[4]=n(" Chưa có tài khoản? ",-1)),l(c,{to:"/register",class:"text-blue-500 font-semibold hover:underline ml-1"},{default:u(()=>[...e[3]||(e[3]=[n("Đăng ký ngay",-1)])]),_:1})]),r("p",$,[e[6]||(e[6]=n(" Quên mật khẩu? ",-1)),l(c,{to:"/forgotPassword",class:"text-blue-500 font-semibold hover:underline ml-1"},{default:u(()=>[...e[5]||(e[5]=[n("Đặt lại mật khẩu",-1)])]),_:1})])])],32)}}}),D={class:"min-h-screen flex items-center justify-center bg-linear-to-br from-blue-50 to-indigo-100 px-4"},E={class:"w-full max-w-md"},F=b({__name:"LoginView",setup(v){return(g,f)=>(m(),p("div",D,[r("div",E,[l(j)])]))}}),R=q(F,[["__scopeId","data-v-1850f732"]]);export{R as default};
