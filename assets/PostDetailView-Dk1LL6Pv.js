import{d as b,a as B,b as v,p as C,e as i,o as c,f as t,h as a,A as h,B as $,C as V,t as n,i as f,j as g,g as y,F as z,m as M,u as L,k as H,q as S,c as j,z as N}from"./index-B7h1RgFv.js";import{A as x,v as w,u as D,_ as T}from"./vi-COcUKjEW.js";import{f as A,a as F,L as I}from"./Loading-DwA1nET7.js";import{B as P,_ as U}from"./Button-M4aO0RFN.js";import{f as q}from"./format-BqL5exSm.js";const R={class:"comment-section"},E={class:"comment-input"},G={class:"input-wrapper"},J={class:"input-footer"},K={class:"char-count"},O={class:"comments-list"},Q={key:0,class:"empty-comments"},W={class:"comment-content"},X={class:"comment-header"},Y={class:"comment-user"},Z={class:"comment-username"},tt={class:"comment-time"},et={class:"comment-text"},st=b({__name:"CommentSection",props:{postId:{}},setup(k){const m=B(),r=v(""),d=v(!1),s=v([]),p=C(()=>r.value.trim().length>0),_=e=>{try{const o=new Date(e);return A(o,{addSuffix:!0,locale:w})}catch{return e}},u=async()=>{if(!(!p.value||d.value)){d.value=!0;try{console.log("Posting comment:",r.value),r.value=""}catch(e){console.error("Failed to post comment:",e)}finally{d.value=!1}}};return(e,o)=>(c(),i("div",R,[o[3]||(o[3]=t("h3",{class:"section-title"},"Bình luận",-1)),t("div",E,[a(x,{src:h(m).currentUser?.avatar_url,name:h(m).currentUser?.name,size:"sm"},null,8,["src","name"]),t("div",G,[$(t("textarea",{"onUpdate:modelValue":o[0]||(o[0]=l=>r.value=l),class:"comment-textarea",placeholder:"Viết bình luận...",rows:"2",maxlength:"280"},null,512),[[V,r.value]]),t("div",J,[t("span",K,n(r.value.length)+"/280",1),a(P,{variant:"primary",size:"sm",disabled:!p.value,loading:d.value,onClick:u},{default:f(()=>[...o[1]||(o[1]=[g(" Bình luận ",-1)])]),_:1},8,["disabled","loading"])])])]),t("div",O,[s.value.length===0?(c(),i("div",Q,[...o[2]||(o[2]=[t("p",null,"Chưa có bình luận nào. Hãy là người đầu tiên bình luận!",-1)])])):y("",!0),(c(!0),i(z,null,M(s.value,l=>(c(),i("div",{key:l.id,class:"comment-item"},[a(x,{src:l.user.avatar_url,name:l.user.name,size:"sm"},null,8,["src","name"]),t("div",W,[t("div",X,[t("span",Y,n(l.user.name),1),t("span",Z,"@"+n(l.user.username),1),t("span",tt,n(_(l.created_at)),1)]),t("p",et,n(l.content),1)])]))),128))])]))}}),ot=U(st,[["__scopeId","data-v-ccea3cf5"]]),nt={class:"min-h-screen bg-[#f0f2f5]"},at={class:"flex justify-center pt-4"},lt={class:"w-full max-w-170 px-4"},rt={key:0,class:"bg-white shadow-sm rounded-lg p-8"},it={key:1,class:"bg-white shadow-sm rounded-lg p-6"},ct={class:"flex gap-3 mb-4"},dt={class:"flex flex-col gap-0.5"},ut={key:0,viewBox:"0 0 22 22",width:"20",height:"20",fill:"#1877f2"},mt={class:"text-[#65676b] text-[15px]"},pt={class:"mb-4"},vt={class:"text-2xl leading-8 text-[#050505] mb-6"},_t={class:"py-3 mb-3"},ht={class:"text-[#65676b] text-[15px]"},ft={class:"flex gap-6 py-4 border-t border-b border-[#e4e6eb]"},xt={class:"flex gap-2 items-center"},bt={class:"font-semibold text-[#050505] text-[17px]"},gt={class:"flex gap-2 items-center"},yt={class:"font-semibold text-[#050505] text-[17px]"},wt={class:"flex gap-2 items-center"},kt={class:"font-semibold text-[#050505] text-[17px]"},Bt={class:"flex justify-around py-3 border-b border-[#e4e6eb]"},Ct={class:"mt-4"},Ht=b({__name:"PostDetailView",setup(k){const m=L(),r=H(),d=D(),s=v(null),p=u=>{try{const e=new Date(u);return q(e,"HH:mm · dd MMMM yyyy",{locale:w})}catch{return u}},_=()=>{m.back()};return S(async()=>{const u=Number(r.params.id);s.value=await d.getPostById(u)}),(u,e)=>{const o=j("router-link");return c(),i("div",nt,[a(T),t("div",at,[t("div",lt,[t("div",{class:"flex items-center gap-3 p-3 bg-white shadow-sm rounded-lg mb-3"},[t("button",{class:"flex items-center justify-center w-9 h-9 border-none bg-[#e4e6eb] text-[#050505] cursor-pointer rounded-full transition-colors hover:bg-[#d8dadf]",onClick:_},[...e[0]||(e[0]=[t("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor"},[t("path",{d:"M7.414 13l5.043 5.04-1.414 1.42L3.586 12l7.457-7.46 1.414 1.42L7.414 11H21v2H7.414z"})],-1)])]),e[1]||(e[1]=t("h2",{class:"text-xl font-bold text-[#050505] m-0"},"Bài đăng",-1))]),h(d).loading||!s.value?(c(),i("div",rt,[a(F,{text:"Đang tải bài đăng..."})])):(c(),i("div",it,[t("div",ct,[a(o,{to:`/profile/${s.value.user.username}`,class:"shrink-0"},{default:f(()=>[a(x,{src:s.value.user.avatar_url,name:s.value.user.name,size:"lg"},null,8,["src","name"])]),_:1},8,["to"]),t("div",dt,[a(o,{to:`/profile/${s.value.user.username}`,class:"font-bold text-[#050505] flex items-center gap-1 no-underline text-[17px] hover:underline"},{default:f(()=>[g(n(s.value.user.name)+" ",1),s.value.user.verified?(c(),i("svg",ut,[...e[2]||(e[2]=[t("path",{d:"M20.396 11c-.018-.646-.215-1.275-.57-1.816-.354-.54-.852-.972-1.438-1.246.223-.607.27-1.264.14-1.897-.131-.634-.437-1.218-.882-1.687-.47-.445-1.053-.75-1.687-.882-.633-.13-1.29-.083-1.897.14-.273-.587-.704-1.086-1.245-1.44S11.647 1.62 11 1.604c-.646.017-1.273.213-1.813.568s-.969.854-1.24 1.44c-.608-.223-1.267-.272-1.902-.14-.635.13-1.22.436-1.69.882-.445.47-.749 1.055-.878 1.688-.13.633-.08 1.29.144 1.896-.587.274-1.087.705-1.443 1.245-.356.54-.555 1.17-.574 1.817.02.647.218 1.276.574 1.817.356.54.856.972 1.443 1.245-.224.606-.274 1.263-.144 1.896.13.634.433 1.218.877 1.688.47.443 1.054.747 1.687.878.633.132 1.29.084 1.897-.136.274.586.705 1.084 1.246 1.439.54.354 1.17.551 1.816.569.647-.016 1.276-.213 1.817-.567s.972-.854 1.245-1.44c.604.239 1.266.296 1.903.164.636-.132 1.22-.447 1.68-.907.46-.46.776-1.044.908-1.681s.075-1.299-.165-1.903c.586-.274 1.084-.705 1.439-1.246.354-.54.551-1.17.569-1.816zM9.662 14.85l-3.429-3.428 1.293-1.302 2.072 2.072 4.4-4.794 1.347 1.246z"},null,-1)])])):y("",!0)]),_:1},8,["to"]),t("span",mt,"@"+n(s.value.user.username),1)])]),t("div",pt,[t("p",vt,n(s.value.content),1),t("div",_t,[t("span",ht,n(p(s.value.created_at)),1)])]),t("div",ft,[t("div",xt,[t("span",bt,n(s.value.likes_count),1),e[3]||(e[3]=t("span",{class:"text-[#65676b] text-[15px]"},"Lượt thích",-1))]),t("div",gt,[t("span",yt,n(s.value.replies_count),1),e[4]||(e[4]=t("span",{class:"text-[#65676b] text-[15px]"},"Bình luận",-1))]),t("div",wt,[t("span",kt,n(s.value.reposts_and_quotes_count),1),e[5]||(e[5]=t("span",{class:"text-[#65676b] text-[15px]"},"Chia sẻ",-1))])]),t("div",Bt,[e[6]||(e[6]=N('<button class="flex items-center justify-center p-2 border-none bg-transparent text-[#65676b] cursor-pointer rounded-lg transition-all hover:bg-[#f0f2f5]"><svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M1.751 10c0-4.42 3.584-8 8.005-8h4.366c4.49 0 8.129 3.64 8.129 8.13 0 2.96-1.607 5.68-4.196 7.11l-8.054 4.46v-3.69h-.067c-4.49.1-8.183-3.51-8.183-8.01zm8.005-6c-3.317 0-6.005 2.69-6.005 6 0 3.37 2.77 6.08 6.138 6.01l.351-.01h1.761v2.3l5.087-2.81c1.951-1.08 3.163-3.13 3.163-5.36 0-3.39-2.744-6.13-6.129-6.13H9.756z"></path></svg></button><button class="flex items-center justify-center p-2 border-none bg-transparent text-[#65676b] cursor-pointer rounded-lg transition-all hover:bg-[#f0f2f5]"><svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M4.5 3.88l4.432 4.14-1.364 1.46L5.5 7.55V16c0 1.1.896 2 2 2H13v2H7.5c-2.209 0-4-1.79-4-4V7.55L1.432 9.48.068 8.02 4.5 3.88zM16.5 6H11V4h5.5c2.209 0 4 1.79 4 4v8.45l2.068-1.93 1.364 1.46-4.432 4.14-4.432-4.14 1.364-1.46 2.068 1.93V8c0-1.1-.896-2-2-2z"></path></svg></button>',2)),a(I,{"post-id":s.value.id,"is-liked":s.value.is_liked_by_auth,"likes-count":s.value.likes_count},null,8,["post-id","is-liked","likes-count"]),e[7]||(e[7]=t("button",{class:"flex items-center justify-center p-2 border-none bg-transparent text-[#65676b] cursor-pointer rounded-lg transition-all hover:bg-[#f0f2f5]"},[t("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor"},[t("path",{d:"M12 2.59l5.7 5.7-1.41 1.42L13 6.41V16h-2V6.41l-3.3 3.3-1.41-1.42L12 2.59zM21 15l-.02 3.51c0 1.38-1.12 2.49-2.5 2.49H5.5C4.11 21 3 19.88 3 18.5V15h2v3.5c0 .28.22.5.5.5h12.98c.28 0 .5-.22.5-.5L19 15h2z"})])],-1))]),t("div",Ct,[a(ot,{"post-id":s.value.id},null,8,["post-id"])])])),e[8]||(e[8]=t("div",{class:"h-6"},null,-1))])])])}}});export{Ht as default};
