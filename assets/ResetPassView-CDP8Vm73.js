import{d as b,u as B,a as N,k as R,r as _,b as m,c as S,e as l,o as i,w as P,f as d,g,h as a,t as x,i as k,j as c}from"./index-B7h1RgFv.js";import{I as v}from"./Input-DbqAuQ8p.js";import{B as q,_ as I}from"./Button-M4aO0RFN.js";const T={key:0,class:"px-4 py-3.5 rounded-lg text-sm bg-red-50 text-red-600 border border-red-200"},$={key:1,class:"px-4 py-3.5 rounded-lg text-sm bg-green-50 text-green-600 border border-green-200"},j={class:"text-center pt-4 border-t border-gray-200"},D={class:"text-gray-600"},F=b({__name:"ResetPassForm",setup(y){const f=B(),w=N(),h=R().query.token,e=_({password:"",password_confirmation:""}),o=_({password:"",password_confirmation:""}),u=m(!1),r=m(""),n=m(""),V=()=>{let s=!0;return o.password="",o.password_confirmation="",e.password?e.password.length<6&&(o.password="Mật khẩu phải có ít nhất 6 ký tự",s=!1):(o.password="Vui lòng nhập mật khẩu",s=!1),e.password_confirmation?e.password!==e.password_confirmation&&(o.password_confirmation="Mật khẩu xác nhận không khớp",s=!1):(o.password_confirmation="Vui lòng xác nhận mật khẩu",s=!1),s},C=async()=>{if(r.value="",n.value="",console.log(h,e.password,e.password_confirmation),!!V()){u.value=!0;try{const s=await w.resetPassword({token:h,password:e.password,password_confirmation:e.password_confirmation});s?.success?(n.value=s.message||"Cập nhật mật khẩu thành công!",setTimeout(()=>{f.push("/feed")},2e3)):r.value=s?.message||"Cập nhật mật khẩu thất bại"}catch(s){r.value=s.message||"Có lỗi xảy ra, vui lòng thử lại"}finally{u.value=!1}}};return(s,t)=>{const M=S("router-link");return i(),l("form",{onSubmit:P(C,["prevent"]),class:"w-full max-w-md flex flex-col gap-5"},[t[5]||(t[5]=d("h2",{class:"text-3xl font-bold text-gray-900 text-center"},"Đặt lại mật khẩu",-1)),r.value?(i(),l("div",T,x(r.value),1)):g("",!0),n.value?(i(),l("div",$,x(n.value),1)):g("",!0),a(v,{id:"password",modelValue:e.password,"onUpdate:modelValue":t[0]||(t[0]=p=>e.password=p),label:"Mật khẩu",type:"password",placeholder:"Tạo mật khẩu",required:"",error:o.password},null,8,["modelValue","error"]),a(v,{id:"password_confirmation",modelValue:e.password_confirmation,"onUpdate:modelValue":t[1]||(t[1]=p=>e.password_confirmation=p),label:"Xác nhận mật khẩu",type:"password",placeholder:"Nhập lại mật khẩu",required:"",error:o.password_confirmation},null,8,["modelValue","error"]),a(q,{type:"submit",variant:"primary",loading:u.value,"custom-class":"w-full mt-2"},{default:k(()=>[...t[2]||(t[2]=[c(" Cập nhật mật khẩu ",-1)])]),_:1},8,["loading"]),d("div",j,[d("p",D,[t[4]||(t[4]=c(" Đã có nhớ mật khẩu? ",-1)),a(M,{to:"/login",class:"text-blue-500 font-semibold hover:underline ml-1"},{default:k(()=>[...t[3]||(t[3]=[c("Đăng nhập",-1)])]),_:1})])])],32)}}}),U={class:"min-h-screen flex items-center justify-center bg-linear-to-br from-blue-50 to-indigo-100 px-4"},A={class:"w-full max-w-md"},E=b({__name:"ResetPassView",setup(y){return(f,w)=>(i(),l("div",U,[d("div",A,[a(F)])]))}}),J=I(E,[["__scopeId","data-v-c7540c93"]]);export{J as default};
