import{t as m,c as O,n as x,g as T,e as B,a as y,m as L,b as v,u as Y}from"./vi-COcUKjEW.js";import{d as I,b as g,v as w,e as M,o as D,w as z,n as C,f as _,t as S,g as F}from"./index-B7h1RgFv.js";import{_ as b}from"./Button-M4aO0RFN.js";function p(t,s){const n=+m(t)-+m(s);return n<0?-1:n>0?1:n}function N(t){return O(t,Date.now())}function H(t,s,n){const[a,e]=x(n?.in,t,s),i=a.getFullYear()-e.getFullYear(),u=a.getMonth()-e.getMonth();return i*12+u}function A(t){return s=>{const a=(t?Math[t]:Math.trunc)(s);return a===0?0:a}}function $(t,s){return+m(t)-+m(s)}function E(t,s){const n=m(t,s?.in);return n.setHours(23,59,59,999),n}function R(t,s){const n=m(t,s?.in),a=n.getMonth();return n.setFullYear(n.getFullYear(),a+1,0),n.setHours(23,59,59,999),n}function V(t,s){const n=m(t,s?.in);return+E(n,s)==+R(n,s)}function j(t,s,n){const[a,e,i]=x(n?.in,t,t,s),u=p(e,i),o=Math.abs(H(e,i));if(o<1)return 0;e.getMonth()===1&&e.getDate()>27&&e.setDate(30),e.setMonth(e.getMonth()-u*o);let c=p(e,i)===-u;V(a)&&o===1&&p(a,i)===1&&(c=!1);const l=u*(o-+c);return l===0?0:l}function P(t,s,n){const a=$(t,s)/1e3;return A(n?.roundingMethod)(a)}function U(t,s,n){const a=T(),e=n?.locale??a.locale??B,i=2520,u=p(t,s);if(isNaN(u))throw new RangeError("Invalid time value");const o=Object.assign({},n,{addSuffix:n?.addSuffix,comparison:u}),[c,l]=x(n?.in,...u>0?[s,t]:[t,s]),f=P(l,c),X=(y(l)-y(c))/1e3,r=Math.round((f-X)/60);let h;if(r<2)return n?.includeSeconds?f<5?e.formatDistance("lessThanXSeconds",5,o):f<10?e.formatDistance("lessThanXSeconds",10,o):f<20?e.formatDistance("lessThanXSeconds",20,o):f<40?e.formatDistance("halfAMinute",0,o):f<60?e.formatDistance("lessThanXMinutes",1,o):e.formatDistance("xMinutes",1,o):r===0?e.formatDistance("lessThanXMinutes",1,o):e.formatDistance("xMinutes",r,o);if(r<45)return e.formatDistance("xMinutes",r,o);if(r<90)return e.formatDistance("aboutXHours",1,o);if(r<L){const d=Math.round(r/60);return e.formatDistance("aboutXHours",d,o)}else{if(r<i)return e.formatDistance("xDays",1,o);if(r<v){const d=Math.round(r/L);return e.formatDistance("xDays",d,o)}else if(r<v*2)return h=Math.round(r/v),e.formatDistance("aboutXMonths",h,o)}if(h=j(l,c),h<12){const d=Math.round(r/v);return e.formatDistance("xMonths",d,o)}else{const d=h%12,k=Math.trunc(h/12);return d<3?e.formatDistance("aboutXYears",k,o):d<9?e.formatDistance("overXYears",k,o):e.formatDistance("almostXYears",k+1,o)}}function se(t,s){return U(t,N(t),s)}const q=["disabled"],G={key:0,viewBox:"0 0 24 24",width:"18",height:"18",fill:"currentColor"},J={key:1,viewBox:"0 0 24 24",width:"18",height:"18",fill:"currentColor",class:"heart-filled"},K=I({__name:"LikeButton",props:{postId:{},isLiked:{type:Boolean},likesCount:{}},setup(t){const s=t,n=Y(),a=g(s.isLiked),e=g(s.likesCount),i=g(!1),u=g(!1);w(()=>s.isLiked,c=>{a.value=c}),w(()=>s.likesCount,c=>{e.value=c});const o=async()=>{if(i.value)return;i.value=!0;const c=a.value,l=e.value;a.value=!a.value,e.value=a.value?e.value+1:e.value-1,u.value=!0,setTimeout(()=>{u.value=!1},300);try{await n.toggleLike(s.postId)}catch(f){a.value=c,e.value=l,console.error("Failed to toggle like:",f)}finally{i.value=!1}};return(c,l)=>(D(),M("button",{class:C(["like-btn",{liked:a.value}]),onClick:z(o,["stop"]),disabled:i.value},[a.value?(D(),M("svg",J,[...l[1]||(l[1]=[_("path",{d:"M12 21.638h-.014C9.403 21.59 1.95 14.856 1.95 8.478c0-3.064 2.525-5.754 5.403-5.754 2.29 0 3.83 1.58 4.646 2.73.814-1.148 2.354-2.73 4.645-2.73 2.88 0 5.404 2.69 5.404 5.755 0 6.376-7.454 13.11-10.037 13.157H12z"},null,-1)])])):(D(),M("svg",G,[...l[0]||(l[0]=[_("path",{d:"M12 21.638h-.014C9.403 21.59 1.95 14.856 1.95 8.478c0-3.064 2.525-5.754 5.403-5.754 2.29 0 3.83 1.58 4.646 2.73.814-1.148 2.354-2.73 4.645-2.73 2.88 0 5.404 2.69 5.404 5.755 0 6.376-7.454 13.11-10.037 13.157H12zM7.354 4.225c-2.08 0-3.903 1.988-3.903 4.255 0 5.74 7.034 11.596 8.55 11.658 1.518-.062 8.55-5.917 8.55-11.658 0-2.267-1.823-4.255-3.903-4.255-2.528 0-3.94 2.936-3.952 2.965-.23.562-1.156.562-1.387 0-.014-.03-1.425-2.965-3.954-2.965z"},null,-1)])])),_("span",{class:C({"count-animate":u.value})},S(e.value),3)],10,q))}}),oe=b(K,[["__scopeId","data-v-cd51b9f2"]]),Q={class:"loading-container"},W={key:0,class:"loading-text"},Z=I({__name:"Loading",props:{text:{}},setup(t){return(s,n)=>(D(),M("div",Q,[n[0]||(n[0]=_("div",{class:"spinner"},null,-1)),t.text?(D(),M("p",W,S(t.text),1)):F("",!0)]))}}),ae=b(Z,[["__scopeId","data-v-05483da9"]]);export{oe as L,ae as a,se as f};
