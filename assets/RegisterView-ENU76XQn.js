import{d as v,u as C,a as M,r as _,b as c,c as N,e as u,o as p,w as B,f as l,g as b,h as a,t as k,i as g,j as i}from"./index-CQSWO8Li.js";import{I as d}from"./Input-G0PGgnkO.js";import{B as S,_ as $}from"./Button-DeOwv_UT.js";const q={key:0,class:"px-4 py-3.5 rounded-lg text-sm bg-red-50 text-red-600 border border-red-200"},R={key:1,class:"px-4 py-3.5 rounded-lg text-sm bg-green-50 text-green-600 border border-green-200"},T={class:"text-center pt-4 border-t border-gray-200"},E={class:"text-gray-600"},I={class:"text-gray-600"},j=v({__name:"RegisterForm",setup(V){const h=C(),w=M(),e=_({username:"",email:"",password:"",password_confirmation:""}),r=_({username:"",email:"",password:"",password_confirmation:""}),f=c(!1),n=c(""),m=c(""),y=()=>{let t=!0;return r.username="",r.email="",r.password="",r.password_confirmation="",e.username.trim()?e.username.length<3?(r.username="Username phải có ít nhất 3 ký tự",t=!1):/^[a-zA-Z0-9_]+$/.test(e.username)||(r.username="Username chỉ được chứa chữ cái, số và dấu gạch dưới",t=!1):(r.username="Vui lòng nhập username",t=!1),e.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email)||(r.email="Email không hợp lệ",t=!1):(r.email="Vui lòng nhập email",t=!1),e.password?e.password.length<6&&(r.password="Mật khẩu phải có ít nhất 6 ký tự",t=!1):(r.password="Vui lòng nhập mật khẩu",t=!1),e.password_confirmation?e.password!==e.password_confirmation&&(r.password_confirmation="Mật khẩu xác nhận không khớp",t=!1):(r.password_confirmation="Vui lòng xác nhận mật khẩu",t=!1),t},U=async()=>{if(n.value="",m.value="",!!y()){f.value=!0;try{const t=await w.register({username:e.username,email:e.email,password:e.password,password_confirmation:e.password_confirmation});t?.success?(m.value=t.message||"Đăng ký thành công!",setTimeout(()=>{h.push("/feed")},2e3)):n.value=t?.error||"Đăng ký thất bại"}catch(t){n.value=t.message||"Có lỗi xảy ra, vui lòng thử lại"}finally{f.value=!1}}};return(t,s)=>{const x=N("router-link");return p(),u("form",{onSubmit:B(U,["prevent"]),class:"w-full max-w-md flex flex-col gap-5"},[s[9]||(s[9]=l("h2",{class:"text-3xl font-bold text-gray-900 text-center"},"Đăng ký",-1)),s[10]||(s[10]=l("p",{class:"text-gray-600 text-center -mt-2"},"Tạo tài khoản mới để bắt đầu",-1)),n.value?(p(),u("div",q,k(n.value),1)):b("",!0),m.value?(p(),u("div",R,k(m.value),1)):b("",!0),a(d,{id:"username",modelValue:e.username,"onUpdate:modelValue":s[0]||(s[0]=o=>e.username=o),label:"Username",type:"text",placeholder:"Chọn một username",required:"",error:r.username},null,8,["modelValue","error"]),a(d,{id:"email",modelValue:e.email,"onUpdate:modelValue":s[1]||(s[1]=o=>e.email=o),label:"Email",type:"email",placeholder:"Nhập email của bạn",required:"",error:r.email},null,8,["modelValue","error"]),a(d,{id:"password",modelValue:e.password,"onUpdate:modelValue":s[2]||(s[2]=o=>e.password=o),label:"Mật khẩu",type:"password",placeholder:"Tạo mật khẩu",required:"",error:r.password},null,8,["modelValue","error"]),a(d,{id:"password_confirmation",modelValue:e.password_confirmation,"onUpdate:modelValue":s[3]||(s[3]=o=>e.password_confirmation=o),label:"Xác nhận mật khẩu",type:"password",placeholder:"Nhập lại mật khẩu",required:"",error:r.password_confirmation},null,8,["modelValue","error"]),a(S,{type:"submit",variant:"primary",loading:f.value,"custom-class":"w-full mt-2"},{default:g(()=>[...s[4]||(s[4]=[i(" Đăng ký ",-1)])]),_:1},8,["loading"]),l("div",T,[l("p",E,[s[6]||(s[6]=i(" Đã có tài khoản? ",-1)),a(x,{to:"/login",class:"text-blue-500 font-semibold hover:underline ml-1"},{default:g(()=>[...s[5]||(s[5]=[i("Đăng nhập",-1)])]),_:1})]),l("p",I,[s[8]||(s[8]=i(" Quên mật khẩu? ",-1)),a(x,{to:"/forgotPassword",class:"text-blue-500 font-semibold hover:underline ml-1"},{default:g(()=>[...s[7]||(s[7]=[i("Đặt lại mật khẩu",-1)])]),_:1})])])],32)}}}),A={class:"min-h-screen flex items-center justify-center bg-linear-to-br from-blue-50 to-indigo-100 px-4"},D={class:"w-full max-w-md"},F=v({__name:"RegisterView",setup(V){return(h,w)=>(p(),u("div",A,[l("div",D,[a(j)])]))}}),X=$(F,[["__scopeId","data-v-167e2d05"]]);export{X as default};
